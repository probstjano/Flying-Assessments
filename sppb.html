<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SPPB â€“ Short Physical Performance Battery</title>
  <style>
    body { font-family: sans-serif; margin: 10px; font-size: 16px; line-height: 1.5; max-width: 600px; }
    label { display: block; margin: 10px 0 5px; }
    input[type="text"], input[type="number"] {
      width: 100%; padding: 6px; font-size: 16px; margin-bottom: 10px;
    }
    button {
      padding: 10px 15px; font-size: 16px; margin-top: 10px;
    }
    #result, #normwerte { font-weight: bold; margin-top: 20px; }
    .hidden { display: none; }
    .inline { display: inline-block; margin-right: 10px; }
  </style>
</head>
<body>
  <h1>SPPB â€“ Short Physical Performance Battery</h1>
  <p>Test fÃ¼r physische LeistungsfÃ¤higkeit unterer ExtremitÃ¤ten.</p>
  <p>Eintragen mit Einzelwerte im Cenplex Behandlungsplan unter "Messung".</p>
  <p>
    Detailliertes DurchfÃ¼hrungsprotokoll hier:
    <a href="SPPB_Protokoll.pdf" target="_blank">SPPB Protokoll (PDF)</a>
  </p>
  <p><strong>Nur bei Bedarf hier eintragen</strong> fÃ¼r Infos, Normwerte und Score-Berechnung.</p>

  <form id="sppbForm">
    <h3>Balance</h3>
    <label><input type="checkbox" id="standZusammen"> FÃ¼ÃŸe zusammen >10s</label>
    <label><input type="checkbox" id="semitandem"> Semitandem >10s</label>
    <label>Tandem (Zeit in Sekunden, z.â€¯B. 8.50):</label>
    <input type="number" id="tandemZeit" step="0.01">

    <h3>Gehgeschwindigkeit</h3>
    <label>Gemessene Strecke:</label>
    <label class="inline"><input type="radio" name="strecke" value="3" checked> 3 Meter</label>
    <label class="inline"><input type="radio" name="strecke" value="4"> 4 Meter</label>

    <label>Zeit in Sekunden (z.â€¯B. 5.20):</label>
    <input type="number" id="gehzeit" step="0.01">

    <h3>5x Sitz-Stand</h3>
    <label>Zeit in Sekunden (z.â€¯B. 12.75):</label>
    <input type="number" id="sitzStand" step="0.01">

    <button type="button" onclick="calculateSPPB()">âœ… Score berechnen</button>
  </form>

  <p id="result"></p>

  <div id="ageSection" class="hidden">
    <label>Alter der Person:</label>
    <input type="number" id="age" min="0" max="120">
    <button onclick="toggleNorms()">ðŸ“Š Normwerte anzeigen</button>
    <div id="normwerte"></div>
  </div>

  <script>
    function calculateSPPB() {
      let balance = 0;
      const tandem = parseFloat(document.getElementById("tandemZeit").value);

      if (document.getElementById("standZusammen").checked) balance += 1;
      if (document.getElementById("semitandem").checked) balance += 1;
      if (!isNaN(tandem)) {
        if (tandem >= 3 && tandem < 10) balance += 1;
        if (tandem >= 10) balance += 2;
      }

      const dist = parseFloat(document.querySelector('input[name="strecke"]:checked').value);
      const gehzeit = parseFloat(document.getElementById("gehzeit").value);
      let speed = 0;
      let gangScore = 0;

      if (!isNaN(dist) && !isNaN(gehzeit) && gehzeit > 0) {
        speed = dist / gehzeit;
        if (speed <= 0.45) gangScore = 1;
        else if (speed <= 0.64) gangScore = 2;
        else if (speed <= 0.82) gangScore = 3;
        else if (speed > 0.82) gangScore = 4;
      }

      const sitzZeit = parseFloat(document.getElementById("sitzStand").value);
      let sitzScore = 0;

      if (isNaN(sitzZeit) || sitzZeit > 60) sitzScore = 0;
      else if (sitzZeit > 16.7) sitzScore = 1;
      else if (sitzZeit >= 13.7) sitzScore = 2;
      else if (sitzZeit >= 11.2) sitzScore = 3;
      else sitzScore = 4;

      const total = balance + gangScore + sitzScore;
      const speedText = (!isNaN(speed)) ? speed.toFixed(2) + " m/s" : "-";

      document.getElementById("result").innerText =
        `Gesamt-Score: ${total}/12\nBalance: ${balance}/4, Gang: ${gangScore}/4, 5x Sitz-Stand: ${sitzScore}/4\nGeschwindigkeit: ${speedText}`;

      document.getElementById("ageSection").classList.remove("hidden");
    }

    <script>
  function toggleNorms() {
    const age = parseInt(document.getElementById("age").value);
    const norms = document.getElementById("normwerte");
    let normText = "";
    let unableText = "";

    if (isNaN(age)) {
      norms.innerText = "Bitte zuerst das Alter eingeben.";
      return;
    }

    if (age >= 65 && age <= 69) {
      normText = "Normwert 5x Sitz-Stand (65â€“69 Jahre): ca. 13.3â€“13.9 Sekunden";
      unableText = "Nicht in der Lage: ca. 13.7â€“15.1â€¯% (MÃ¤nnerâ€“Frauen)";
    } else if (age >= 70 && age <= 74) {
      normText = "Normwert 5x Sitz-Stand (70â€“74 Jahre): ca. 13.8â€“15.1 Sekunden";
      unableText = "Nicht in der Lage: ca. 16.2â€“22.0â€¯% (MÃ¤nnerâ€“Frauen)";
    } else if (age >= 75 && age <= 79) {
      normText = "Normwert 5x Sitz-Stand (75â€“79 Jahre): ca. 14.7â€“15.9 Sekunden";
      unableText = "Nicht in der Lage: ca. 23.4â€“31.6â€¯% (MÃ¤nnerâ€“Frauen)";
    } else if (age >= 80 && age <= 84) {
      normText = "Normwert 5x Sitz-Stand (80â€“84 Jahre): ca. 15.1â€“16.9 Sekunden";
      unableText = "Nicht in der Lage: ca. 34.4â€“46.0â€¯% (MÃ¤nnerâ€“Frauen)";
    } else if (age >= 85 && age <= 89) {
      normText = "Normwert 5x Sitz-Stand (85â€“89 Jahre): ca. 17.2â€“18.1 Sekunden";
      unableText = "Nicht in der Lage: ca. 51.9â€“54.3â€¯% (MÃ¤nnerâ€“Frauen)";
    } else if (age >= 90) {
      normText = "Normwert 5x Sitz-Stand (90+ Jahre): ca. 16.4â€“18.5 Sekunden";
      unableText = "Nicht in der Lage: ca. 62.5â€“83.5â€¯% (MÃ¤nnerâ€“Frauen)";
    } else {
      normText = "Keine Normwerte fÃ¼r diese Altersgruppe verfÃ¼gbar.";
      unableText = "";
    }

    norms.innerText = `${normText}\n${unableText}`;
    norms.classList.remove("hidden");
  }
  </script>
</body>
</html>
