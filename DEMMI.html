<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>DEMMI</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body { font-family: sans-serif; max-width: 800px; margin: auto; padding: 20px; }
    label { display: block; margin: 10px 0; }
  </style>
</head>
<body>
  <h1>DEMMI ‚Äì De Morton Mobility Index</h1>
  <form id="demmiForm">
    <div id="questions"></div>
    <button type="button" onclick="calculateDEMMI()">‚úÖ Score berechnen</button>
    <button type="button" onclick="downloadPDF()">üìÑ Als PDF speichern</button>
  </form>
  <p id="result"></p>

    <div class="nav-buttons">
    <a href="standard.html">‚¨ÖÔ∏è Zur√ºck zu Standard-Assessments</a>
    <a href="index.html">üè† Zur Startseite</a>
  </div>

  <script>
    const questions = [
  { text: "1. Ges√§ss anheben im Bett", options: [
    { value: 0, label: "Nicht m√∂glich" },
    { value: 1, label: "M√∂glich" }
  ] },
  { text: "2. Seitlich rollen", options: [
    { value: 0, label: "Nicht m√∂glich" },
    { value: 1, label: "M√∂glich" }
  ] },
  { text: "3. Aufsitzen auf die Bettkante", options: [
    { value: 0, label: "Nicht m√∂glich" },
    { value: 1, label: "M√∂glich" }
  ] },
  { text: "4. Sitzen ohne Armlehne (10 Sek.)", options: [
    { value: 0, label: "Nicht m√∂glich" },
    { value: 1, label: "M√∂glich" }
  ] },
  { text: "5. Aufstehen MIT Armlehne", options: [
    { value: 0, label: "Nicht m√∂glich" },
    { value: 1, label: "M√∂glich" }
  ] },
  { text: "6. Aufstehen OHNE Armlehne", options: [
    { value: 0, label: "Nicht m√∂glich" },
    { value: 1, label: "Geringe Unterst√ºtzung / Supervision" },
    { value: 2, label: "Selbst√§ndig" }
  ] },
  { text: "7. Stehen frei (10 Sek.)", options: [
    { value: 0, label: "Nicht m√∂glich" },
    { value: 1, label: "M√∂glich" }
  ] },
  { text: "8. Stehen mit geschlossenen F√º√üen (10 Sek.)", options: [
    { value: 0, label: "Nicht m√∂glich" },
    { value: 1, label: "M√∂glich" }
  ] },
  { text: "9. Zehenspitzenstand (10 Sek.)", options: [
    { value: 0, label: "Nicht m√∂glich" },
    { value: 1, label: "M√∂glich" }
  ] },
  { text: "10. Tandemstand mit geschlossenen Augen (10 Sek.)", options: [
    { value: 0, label: "Nicht m√∂glich" },
    { value: 1, label: "M√∂glich" }
  ] },
  { text: "11. Gehstrecke", options: [
    { value: 0, label: "< 1 m" },
    { value: 1, label: "1‚Äì10 m" },
    { value: 2, label: "> 10 m" }
  ] },
  { text: "12. Gehen: Selbst√§ndigkeit", options: [
    { value: 0, label: "Viel Hilfe n√∂tig" },
    { value: 1, label: "Geringe Hilfe / Supervision" },
    { value: 2, label: "Selbst√§ndig" }
  ] },
  { text: "13. Stift aufheben", options: [
    { value: 0, label: "Nicht m√∂glich" },
    { value: 1, label: "M√∂glich" }
  ] },
  { text: "14. 4 Schritte r√ºckw√§rts", options: [
    { value: 0, label: "Nicht m√∂glich" },
    { value: 1, label: "M√∂glich" }
  ] },
  { text: "15. Beidbeiniges Springen", options: [
    { value: 0, label: "Nicht m√∂glich" },
    { value: 1, label: "M√∂glich" }
  ] }
];

    const conversion = [0,8,15,20,24,27,30,33,36,39,41,44,48,53,57,62,67,67,74,85,100];

    const container = document.getElementById("questions");
    questions.forEach((q, i) => {
      let optionsHTML = "";
     q.options.forEach(opt => {
  optionsHTML += `<option value="${opt.value}">${opt.label}</option>`;
});
      container.innerHTML += `<label>${q.text}
        <select name="q${i}">${optionsHTML}</select>
      </label>`;
    });

    
    function calculateDEMMI() {
      const form = document.forms["demmiForm"];
      let score = 0;
      for (let i = 0; i < questions.length; i++) {
        score += parseInt(form["q" + i].value);
      }
      const scaled = score <= 20 ? conversion[score] : "Ung√ºltig";
      document.getElementById("result").innerText =
        `Rohscore: ${score}/20 ‚Üí DEMMI-Score: ${scaled}/100`;
    }

   <script>
  async function downloadPDF() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();
    const form = document.forms["demmiForm"];
    let y = 10;

    doc.text("DEMMI-Auswertung", 10, y);
    y += 10;

    for (let i = 0; i < questions.length; i++) {
      const selectedValue = form["q" + i].value;
      const optionLabel = questions[i].options.find(opt => opt.value.toString() === selectedValue)?.label || "Keine Auswahl";
      doc.text(`${questions[i].text}: ${optionLabel}`, 10, y);
      y += 7;
      if (y > 280) {
        doc.addPage();
        y = 10;
      }
    }

    y += 5;
    const resultText = document.getElementById("result").innerText || "Kein Ergebnis berechnet.";
    doc.text(resultText, 10, y);

    doc.save("demmi-ergebnis.pdf");
  }
</script>

  </script>
</body>
</html>
